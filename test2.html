<!-- http://stackoverflow.com/questions/34534151/passing-data-to-components-in-vue-js -->
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Drag n drop</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
</head>
<body>
    <div id="formTemp">
        <row-temp v-for="i in rows"></row-temp>
    </div>

    <template id="rowTemp">
        <div>
            <h3>RowTemp</h3>
            <row-comp v-for="n in placeholders" :id="n" :size="sizes[n-1]"></row-comp>
        </div>
    </template>

    <template id="rowComp">
        <div v-if="tamanio > 0" v-on:click="expand">RowComp {{ id }}</div>
    </template>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.0.1/vue.js"></script>
    <script>
/*        Vue.component('row-comp', {
            template: '#rowComp'
        });

        Vue.component('row-temp', {
            template: '#rowTemp'
        });*/

        var rowcomp = {
            template: '#rowComp',
            props: ['id', 'size'],
            data: function() {
                return {
                    tamanio: this.size
                };
            },
            methods: {
                expand: function() {
                    this.tamanio++;
                    this.$emit('expand', this.id);
                },
                contract: function() {
                    this.tamanio--;
                }
            },
            events: {
                contract: function(id) {
                    if(id === this.id) {
                        this.contract();
                    }
                }
            }
        };

        var rowtemp = {
            template: '#rowTemp',
            data: function() {
                return {
                    placeholders: 3,
                    sizes: [1, 2, 3]
                }
            },
            components: {
                'row-comp': rowcomp
            },
            events: {
                expand: function(id) {
                    this.$broadcast('contract', id+1);
                }
            }
        };

        new Vue({
            el: '#formTemp',
            data: {
                rows: 2
            },
            components: {
                'row-temp': rowtemp
            }
        });
    </script>
</body>
</html>